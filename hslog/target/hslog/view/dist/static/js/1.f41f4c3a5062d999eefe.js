webpackJsonp([1],{"5Xoe":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8+FI"),l={data:function(){return{tagsList:[],ulLeft:0}},methods:{isActive:function(t){return t===this.$route.fullPath},closeTags:function(t){var e=this.tagsList.splice(t,1)[0],s=this.tagsList[t]?this.tagsList[t]:this.tagsList[t-1];s?e.path===this.$route.fullPath&&this.$router.push(s.path):this.$router.push("/")},closeAll:function(){this.tagsList=[],this.$router.push("/")},closeOther:function(){var t=this,e=this.tagsList.filter(function(e){return e.path===t.$route.fullPath});this.tagsList=e},setTags:function(t){if(!this.tagsList.some(function(e){return e.path===t.fullPath})){var e="";-1!==t.fullPath.indexOf("=")&&(e=""===t.fullPath.split("=")[1].split("&")[0]?decodeURIComponent(t.fullPath.split("=")[1]):decodeURIComponent(t.fullPath.split("=")[1].split("&")[0])),this.tagsList.push({title:t.meta.title,path:t.fullPath,name:t.matched[1].components.default.name,other:e}),this.computedLeft()}a.default.$emit("tags",this.tagsList)},handleTags:function(t){"other"===t?this.closeOther():this.closeAll()},computedLeft:function(){var t=$(".ul-wapper").width()-($(".ul-wapper ul").width()+139);this.ulLeft=t>=0?0:t},goLeft:function(){if(0!==this.ulLeft){var t=$(".ul-wapper").width();this.ulLeft+=t,this.ulLeft>0&&(this.ulLeft=0)}},goRight:function(){var t=$(".ul-wapper").width(),e=$(".ul-wapper ul").width();Math.abs(this.ulLeft-t)<e&&(this.ulLeft-=t)},move:function(t){}},computed:{showTags:function(){return this.tagsList.length>0},tagLeft:function(){return $(".ul-wapper").width()-$("ul").width()}},watch:{$route:function(t,e){this.setTags(t)}},created:function(){var t=this;this.setTags(this.$route),a.default.$on("router",function(e){t.tagsList.push(e),console.log("c")})}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showTags?s("div",{staticClass:"tags"},[s("span",{staticClass:"go-left",on:{click:t.goLeft}},[s("i",{staticClass:"el-icon-d-arrow-left"})]),t._v(" "),s("div",{staticClass:"ul-wapper"},[s("ul",{style:{left:t.ulLeft+"px"},on:{mousedown:t.move}},t._l(t.tagsList,function(e,a){return s("li",{key:a,staticClass:"tags-li",class:{active:t.isActive(e.path)}},[e.other?s("router-link",{staticClass:"tags-li-title",attrs:{to:e.path,title:e.other+e.title,"data-ss":"eee"}},[s("span",{staticClass:"tag-item-wapper"},[s("span",{staticClass:"tag-span"},[t._v(t._s(e.other))]),t._v(t._s(e.title))])]):s("router-link",{staticClass:"tags-li-title",attrs:{to:e.path}},[t._v("\n                    "+t._s(e.title)+"\n                ")]),t._v(" "),s("span",{staticClass:"tags-li-icon",on:{click:function(e){return t.closeTags(a)}}},[s("i",{staticClass:"el-icon-close"})])],1)}),0)]),t._v(" "),s("span",{staticClass:"go-right",on:{click:t.goRight}},[s("i",{staticClass:"el-icon-d-arrow-right"})]),t._v(" "),s("div",{staticClass:"tags-close-box"},[s("el-dropdown",{on:{command:t.handleTags}},[s("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("\n                标签选项"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown",size:"small"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"other"}},[t._v("关闭其他")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"all"}},[t._v("关闭所有")])],1)],1)],1)]):t._e()},staticRenderFns:[]};var i=s("C7Lr")(l,o,!1,function(t){s("cX0A")},null,null);e.default=i.exports},EfUc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8+FI"),l={data:function(){return{collapse:!1,items:[],systemId:1}},computed:{onRoutes:function(){return this.$route.path.replace("/","")}},created:function(){var t=this;a.default.$on("collapse",function(e){t.collapse=e}),a.default.$on("systemId",function(e){t.systemId=e}),this.getMenuData(this.systemId)},watch:{systemId:function(t){this.getMenuData(t)}},methods:{getMenuData:function(t){var e=this;this.$nextTick(function(){e.$axios.post(e.$baseUrl+"/menu/selectMenu.do",e.$qs.stringify({systemID:t})).then(function(t){t.data.forEach(function(t){t.id=t.id.toString(),t.menus.forEach(function(t){t.url=t.url.split("/")[1].split(".")[0],"logIndex"===t.url&&(t.url="index"),"searchLogs2"===t.url&&(t.url="accurateSearch"),"serviceManage"===t.url&&(t.url="controlCenter");var e=t.url.replace("device","equipment");t.url=e;var s=t.url.replace("Device","Equipment");t.url=s})}),e.items=t.data}).catch(function(t){console.log(t)})})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sidebar"},[s("el-menu",{staticClass:"sidebar-el-menu",attrs:{"default-active":t.onRoutes,collapse:t.collapse,"background-color":"#1A242F","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""}},[t._l(t.items,function(e){return[e.menus?[s("el-submenu",{key:e.id,attrs:{index:e.id}},[s("template",{slot:"title"},[s("i",{class:e.icon}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.menuName))])]),t._v(" "),t._l(e.menus,function(e){return[e.menus?s("el-submenu",{key:e.url,attrs:{index:e.url}},[s("template",{slot:"title"},[t._v(t._s(e.menuName))]),t._v(" "),t._l(e.menus,function(e,a){return s("el-menu-item",{key:a,attrs:{index:e.url}},[t._v("\n                                "+t._s(e.menuName)+"\n                            ")])})],2):s("el-menu-item",{key:e.url,attrs:{index:e.url}},[t._v("\n                            "+t._s(e.menuName)+"\n                        ")])]})],2)]:t._e()]})],2)],1)},staticRenderFns:[]};var i=s("C7Lr")(l,o,!1,function(t){s("RGL7")},"data-v-7ede182d",null);e.default=i.exports},GgDs:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8+FI"),l=s("/sA3"),o={data:function(){return{collapse:!1,fullscreen:!1,passWordForm:!1,message:2,phone:"",roleName:"",passwordObj:{oldPassword:"",password:""},password2:"",mode:0,systemMenu:[],current:0}},watch:{"passwordObj.password":function(t){this.mode=Object(l.b)(t)}},computed:{username:function(){var t=localStorage.getItem("ms_username");return t||this.name}},created:function(){this.getSystem(),this.getUserImformation();var t=JSON.parse(localStorage.getItem("LoginUser"));this.phone=t.phone,1===t.role?this.roleName="管理员":2===t.role?this.roleName="操作员":3===t.role?this.roleName="审查员":4===t.role?this.roleName="游客":5===t.role&&(this.roleName="master")},methods:{getUserImformation:function(){},changePassWord:function(){var t=this;if(""===this.passwordObj.oldPassword)layer.msg("请填写原来密码",{icon:5});else if(""===this.passwordObj.password)layer.msg("未填写新的密码",{icon:5});else if(this.passwordObj.password.length<6||this.passwordObj.password.length>18)layer.msg("密码长度不正确(6-18位)",{icon:5});else if(this.passwordObj.password!==this.password2)layer.msg("两次密码输入不一致",{icon:5});else{layer.load(1);var e=JSON.parse(localStorage.getItem("LoginUser"));this.passwordObj.id=e[0].id,this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/users/updatePasswordById.do",t.$qs.stringify(t.passwordObj)).then(function(e){layer.closeAll(),"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.passWordForm=!1):"false"===e.data.success&&layer.msg(e.data.message,{icon:5})}).catch(function(t){})})}},handleCommand:function(t){var e=this;"loginout"===t?(layer.load(1),this.$nextTick(function(){e.$axios.get(e.$baseUrl+"/user/logout.do","").then(function(t){layer.closeAll("loading"),"true"===t.data.success&&(localStorage.removeItem("ms_username"),e.$router.push("/login"))}).catch(function(t){layer.closeAll("loading")})})):"showPasswordForm"===t&&(this.passWordForm=!0)},collapseChage:function(){this.collapse=!this.collapse,a.default.$emit("collapse",this.collapse)},handleFullScreen:function(){var t=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.fullscreen=!this.fullscreen},getSystem:function(){var t=this;this.$nextTick(function(){layer.load(1),t.$axios.post(t.$baseUrl+"/menu/selectSystem.do","").then(function(e){layer.closeAll("loading"),t.systemMenu=e.data}).catch(function(t){layer.closeAll("loading")})})},changeSystem:function(t,e){this.current=e,a.default.$emit("systemId",t)}},mounted:function(){document.body.clientWidth<1500&&this.collapseChage()}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"collapse-btn",on:{click:t.collapseChage}},[s("i",{staticClass:"el-icon-menu"})]),t._v(" "),t._m(0),t._v(" "),s("ul",{staticClass:"header-ul"},t._l(this.systemMenu,function(e,a){return s("li",{key:a,class:{active:a===t.current},on:{click:function(s){return t.changeSystem(e.id,a)}}},[t._v(t._s(e.systemName))])}),0),t._v(" "),s("div",{staticClass:"header-right"},[s("div",{staticClass:"header-user-con"},[s("div",{staticClass:"btn-fullscreen",on:{click:t.handleFullScreen}},[s("el-tooltip",{attrs:{effect:"dark",content:t.fullscreen?"取消全屏":"全屏",placement:"bottom"}},[s("i",{staticClass:"el-icon-rank"})])],1),t._v(" "),s("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[t._v("\n                    "+t._s(t.roleName)+" - "+t._s(t.phone)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),s("el-dropdown-menu",{staticClass:"drop-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"showPasswordForm"}},[t._v("修改密码")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"loginout"}},[t._v("退出登录")])],1)],1)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:t.passWordForm,width:"400px"},on:{"update:visible":function(e){t.passWordForm=e}}},[s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"旧的密码:"}},[s("el-input",{staticClass:"item",attrs:{type:"password",placeholder:"6-18位数字、字母、字符",maxlength:"18"},model:{value:t.passwordObj.oldPassword,callback:function(e){t.$set(t.passwordObj,"oldPassword",e)},expression:"passwordObj.oldPassword"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新的密码:"}},[s("el-input",{staticClass:"item",attrs:{type:"password",placeholder:"6-18位数字、字母、字符",maxlength:"18"},model:{value:t.passwordObj.password,callback:function(e){t.$set(t.passwordObj,"password",e)},expression:"passwordObj.password"}})],1),t._v(" "),t.passwordObj.password.length>0?s("ul",{staticClass:"pass_set"},[s("li",{staticStyle:{"background-color":"rgb(237, 62, 13)"},attrs:{id:"strength_L"}},[t._v("弱")]),t._v(" "),s("li",{style:t.mode>=2?{background:"#ffaf56"}:{},attrs:{id:"strength_M"}},[t._v("中")]),t._v(" "),s("li",{style:t.mode>2?{background:"#6ba001"}:{},attrs:{id:"strength_H"}},[t._v("强")])]):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"确认密码:"}},[s("el-input",{staticClass:"item",attrs:{type:"password",placeholder:"6-18位数字、字母、字符",maxlength:"18"},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.changePassWord}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.passWordForm=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:s("3DNY"),alt:""}})])}]};var n=s("C7Lr")(o,i,!1,function(t){s("dNtc")},"data-v-a0106102",null);e.default=n.exports},MpTN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("GgDs"),l=s("EfUc"),o=s("zJHf"),i=s("5Xoe"),n=s("8+FI"),r={data:function(){return{tagsList:[],collapse:!1}},components:{vHead:a.default,vSidebar:l.default,vTags:i.default,vBottom:o.default},created:function(){var t=this;n.default.$on("collapse",function(e){t.collapse=e}),n.default.$on("tags",function(e){for(var s=[],a=0,l=e.length;a<l;a++)e[a].name&&s.push(e[a].name);t.tagsList=s}),this.$nextTick(function(){t.$axios.get("static/filejson/logconfig.json",{}).then(function(e){t.$store.commit("updateLogShowColumn",e.data)}).catch(function(t){})})},computed:{key:function(){return void 0!==this.$route.name?this.$route.name:this.$route}},beforeRouteEnter:function(t,e,s){s(function(t){})}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[e("v-head"),this._v(" "),e("v-sidebar"),this._v(" "),e("div",{staticClass:"content-box",class:{"content-collapse":this.collapse}},[e("v-tags"),this._v(" "),e("div",{staticClass:"content"},[e("transition",{attrs:{name:"move",mode:"out-in"}},[e("keep-alive",{attrs:{include:this.tagsList}},[e("router-view",{key:this.key})],1)],1)],1)],1),this._v(" "),e("v-bottom")],1)},staticRenderFns:[]},d=s("C7Lr")(r,c,!1,null,null,null);e.default=d.exports},RGL7:function(t,e){},cX0A:function(t,e){},dNtc:function(t,e){},zJDf:function(t,e){},zJHf:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{thresholdText:"状态获取中",diskUsedState:!1,systemIp:"获取中",systemIpChangeState:!1,sysThresholdValue:92,dataThresholdValue:85,diskObj:{sizeNum:"",usedNum:"",sysAllDisk:"",sysUsedDisk:"",dataAllDisk:"",dataUsedDisk:""}}},created:function(){this.getDiskUsed(),setInterval(this.getDiskUsed,6e6),this.getIp()},methods:{getDiskUsed:function(){var t=this;this.$axios.get(this.$baseUrl+"/manage/getDiskUsage.do",{params:{user:"root",passwd:"hs.1234",host:"192.168.100.101"}}).then(function(e){if(void 0!==e.data.error)t.thresholdText=e.data.error;else{var s=Number(e.data.size),a=Number(e.data.used);t.diskObj={sizeNum:s,usedNum:a,sysAllDisk:e.data.sys_size,sysUsedDisk:e.data.sys_used,dataAllDisk:e.data.data_size,dataUsedDisk:e.data.data_used},t.thresholdText="",t.sysThresholdValue<=Number(e.data.sys_per.split("%")[0])&&(t.thresholdText+="系统盘空间不足,剩余 "+e.data.sys_avail,$(".threshold").css("color","#d9534f")),t.dataThresholdValue<=Number(e.data.data_per.split("%")[0])&&(t.thresholdText+=" 数据盘空间不足,剩余 "+e.data.data_avail,$(".threshold").css("color","#d9534f")),""===t.thresholdText&&(t.thresholdText="磁盘空间充足",$(".threshold").css("color","#1ab394"))}}).catch(function(t){console.log(t)})},setRang:function(){this.diskUsedState=!0},okBtn:function(){this.thresholdText="状态获取中",this.getDiskUsed(),this.diskUsedState=!1},getIp:function(){var t=this;this.$axios.post(this.$baseUrl+"/ip/getIp.do",this.$qs.stringify({})).then(function(e){"true"==e.data[0].success?t.systemIp=e.data[0].message:"false"==e.data[0].success&&(t.systemIp=e.data[0].message)}).catch(function(e){t.systemIp="获取失败"})},changIp:function(){}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom"},[s("div",{staticClass:"b-left"}),t._v(" "),s("div",{staticClass:"b-right"},[s("div",{staticClass:"threshold"},[t._v(t._s(t.thresholdText)+" "),s("span",{staticClass:"set-rang",on:{click:t.setRang}},[t._v("（阈值设置）")])]),t._v(" "),s("div",{staticClass:"systemIp"},[t._v("系统IP："),s("span",{staticStyle:{color:"#e4956d"}},[t._v(t._s(t.systemIp))]),t._v(" "),s("span",{on:{click:t.changIp}})]),t._v(" "),s("div",{staticClass:"company"},[t._v(" 版权所有  © 2018-2019  山东九州信泰信息科技股份有限公司  ")])]),t._v(" "),s("el-dialog",{attrs:{title:"阈值告警数值大小选择",visible:t.diskUsedState,width:"440px"},on:{"update:visible":function(e){t.diskUsedState=e}}},[s("el-form",[s("p",{staticStyle:{color:"#fff"}},[t._v("系统盘阈值大小："+t._s(t.sysThresholdValue)+"%")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sysThresholdValue,expression:"sysThresholdValue"}],staticStyle:{width:"100%"},attrs:{type:"range",id:"myRange1",min:"0",step:"1",max:"100"},domProps:{value:t.sysThresholdValue},on:{__r:function(e){t.sysThresholdValue=e.target.value}}}),t._v(" "),s("p",{staticStyle:{color:"#fff"}},[t._v("数据盘阈值大小："+t._s(t.dataThresholdValue)+"%")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataThresholdValue,expression:"dataThresholdValue"}],staticStyle:{width:"100%"},attrs:{type:"range",id:"myRange2",min:"0",step:"1",max:"100"},domProps:{value:t.dataThresholdValue},on:{__r:function(e){t.dataThresholdValue=e.target.value}}})]),t._v(" "),s("p",{staticStyle:{color:"#fff",display:"flex","justify-content":"space-between"}},[s("span",[t._v("总空间 ："),s("b",{staticStyle:{color:"#1ab394"}},[t._v(t._s(t.diskObj.sizeNum)+"G")])]),t._v(" "),s("span",[t._v("已用空间 ： "),s("b",{staticStyle:{color:"#e4956d"}},[t._v(t._s(t.diskObj.usedNum)+"G")])])]),t._v(" "),s("div",{staticStyle:{color:"#fff",padding:"10px",background:"#485b71"}},[s("p",[t._v("系统盘 : "),s("span",{staticStyle:{color:"#1ab394"}},[t._v(t._s(t.diskObj.sysAllDisk))]),t._v("(总) "),s("span",{staticStyle:{color:"#e4956d","margin-left":"20px"}},[t._v(t._s(t.diskObj.sysUsedDisk))]),t._v("(已用)")]),t._v(" "),s("p",[t._v("数据盘 : "),s("span",{staticStyle:{color:"#1ab394"}},[t._v(t._s(t.diskObj.dataAllDisk))]),t._v("(总) "),s("span",{staticStyle:{color:"#e4956d","margin-left":"20px"}},[t._v(t._s(t.diskObj.dataUsedDisk))]),t._v("(已用)")])]),t._v(" "),s("p",{staticStyle:{color:"#e4956d"}},[t._v("注：阈值修改会影响数据采集，请慎重选择。")]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.okBtn}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.diskUsedState=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var o=s("C7Lr")(a,l,!1,function(t){s("zJDf")},"data-v-021147b8",null);e.default=o.exports}});