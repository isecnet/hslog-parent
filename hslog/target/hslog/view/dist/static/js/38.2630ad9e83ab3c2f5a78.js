webpackJsonp([38],{cvAa:function(t,a){},"o/rO":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("sJCN"),n=e("/sA3"),i={name:"urlGraph",data:function(){return{domain_url:"",nodeData:[],linkData:[]}},watch:{domain_url:function(){this.getUrlGraphData()}},methods:{getUrlGraphData:function(){var t=this,a="/flow/getVisitCountGroupByHttpSourceIP.do",e={};"ip"===this.$route.query.type?(a="/flow/getDstIPCountGroupByHTTPSrcIP.do",e.ipv4_dst_addr=this.$route.query.val):e.domain_url=this.domain_url,layer.load(1),this.$nextTick(function(){t.$axios.post(t.$baseUrl+a,t.$qs.stringify(e)).then(function(a){layer.closeAll();var e=[],r=[];"ip"===t.$route.query.type?e.push({name:a.data[0].ipv4_dst_addr.ipv4_dst_addr,count:a.data[0].ipv4_dst_addr.count}):e.push({name:a.data[0].domain.domain_url,count:a.data[0].domain.count}),a.data[0].source.forEach(function(n){var i={};i.name=n.source_ip,i.count=n.count,e.push(i);var o={};o.source=n.source_ip,"ip"===t.$route.query.type?o.target=a.data[0].ipv4_dst_addr.ipv4_dst_addr:o.target=a.data[0].domain.domain_url,o.count=n.count,r.push(o)}),t.nodeData=e,t.linkData=r}).catch(function(t){layer.closeAll(),layer.msg("获取数据失败3",{icon:5})})})},nodeClick:function(t){var a={};a.val=t.target._private.data.id,a.clickType="node","http"===a.val.substring(0,4)?(a.type="url",a.kname="domain_url"):(a.type="ip",a.kname="multifield_ip"),Object(n.f)("flowLogs"+a.val,"logsManage/flowLogs.vue",a,"日志")},linkClick:function(t){var a={};a.val=t.target._private.data.source+"-"+t.target._private.data.target,a.clickType="link",a.ipv4_src_addr=t.target._private.data.source,"ip"===this.$route.query.type?(a.type="ip",a.ipv4_dst_addr=t.target._private.data.target):(a.type="ip-url",a.targetVal=t.target._private.data.target,a.kname="domain_url"),Object(n.f)("flowLogs"+a.ipv4_src_addr+a.targetVal,"logsManage/flowLogs.vue",a,"日志")}},beforeRouteEnter:function(t,a,e){e(function(a){a.domain_url=t.query.val,a.$options.name="urlGraph"+t.query.val,Object(n.g)(t.name,"logsManage/urlGraph.vue","业务流")})},components:{vBasegraph:r.default}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-bg"},[e("div",{staticClass:"top-title"},[t._v(t._s(t.domain_url)+" 业务流")]),t._v(" "),e("div",{staticClass:"content"},[e("v-basegraph",{attrs:{nodeData:t.nodeData,linkData:t.linkData,nodeClick:t.nodeClick,linkClick:t.linkClick}})],1)])},staticRenderFns:[]};var u=e("C7Lr")(i,o,!1,function(t){e("cvAa")},"data-v-42ef1a42",null);a.default=u.exports}});