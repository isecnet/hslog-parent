webpackJsonp([21],{"/GDH":function(t,e){},NaOX:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("3cXf"),i=o.n(s),a=o("igoR"),r={data:function(){return{warningState:!1,certificate:!1,config:{color:"255,255,255",opacity:.7,zIndex:0,count:99},ruleForm:{phone:"",password:""},rules:{phone:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},watch:{certificate:function(){!0===this.certificate&&setTimeout(function(){$("#ssi-upload").ssi_uploader({url:"/upload/licenseUpload.do",maxNumberOfFiles:1,allowed:["lic"],ajaxOptions:{success:function(t){layer.msg(t,{icon:1})},error:function(t){layer.msg("上传失败",{icon:5}),$(".ssi-abortUpload").click()}}})},100)}},mounted:function(){var t,e=navigator.userAgent.toLowerCase();e.indexOf("msie")>-1&&(t=e.match(/msie ([\d.]+)/)[1]),t<=8&&(this.warningState=!0)},methods:{login:function(){var t=this,e=layer.msg("登陆中,请稍等",{icon:16,shade:.1,time:0,offset:"50px"});this.$nextTick(function(){t.$axios.get(t.$baseUrl+"/user/login.do",{params:{phone:t.ruleForm.phone,password:t.ruleForm.password}}).then(function(o){layer.close(e),"true"===o.data.success?(localStorage.setItem("LoginUser",i()(o.data.user)),t.getLogConfig(),t.$router.push("/")):"false"===o.data.success&&layer.msg(o.data.message,{icon:5,shade:.1,offset:"50px"})}).catch(function(t){layer.closeAll("loading"),console.log(t)})})},uploadCertificate:function(){this.certificate=!0},getLogConfig:function(){var t=this;this.$nextTick(function(){t.$axios.get("static/filejson/logconfig.json",{}).then(function(t){sessionStorage.setItem("logConfig",i()(t.data))}).catch(function(t){console.log(t)})})}},components:{vueCanvasNest:o.n(a).a}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-wrap"},[o("div",{staticClass:"ms-login"},[t._m(0),t._v(" "),o("el-form",{ref:"ruleForm",staticClass:"ms-content",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"0px"}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"账号"},model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}},[o("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-people"},slot:"prepend"})],1)],1),t._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}},[o("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-lock"},slot:"prepend"})],1)],1),t._v(" "),o("div",{staticClass:"login-btn"},[o("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1),t._v(" "),o("p",[o("router-link",{staticClass:"go-register",attrs:{to:"/resigter"}},[t._v("没有账号？点击注册")])],1),t._v(" "),o("p",{staticClass:"gengxin",on:{click:t.uploadCertificate}},[t._v("证书更新")])],1)],1),t._v(" "),o("el-dialog",{staticClass:"dialog-wapper",attrs:{title:"证书更新",visible:t.certificate,width:"680px",height:"550px"},on:{"update:visible":function(e){t.certificate=e}}},[o("p",[t._v("通过浏览本地文件或将文件拖到下面指定区域，上传证书文件。")]),t._v(" "),o("p",[t._v("文件支持的类型："),o("span",{staticClass:"txtColor"},[t._v(".lic")])]),t._v(" "),o("div",{staticStyle:{"padding-right":"30px"}},[o("input",{attrs:{type:"file",multiple:"",id:"ssi-upload"}})]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.certificate=!1}}},[t._v("取 消")])],1)]),t._v(" "),o("div",{staticStyle:{position:"relative","z-index":"0",width:"100vw",height:"100vh"}},[o("vue-canvas-nest",{attrs:{config:{color:"255,255,255",pointColor:"255,255,255",count:50,zIndex:0,opacity:1}}})],1),t._v(" "),t.warningState?o("div",{staticClass:"warning-wapper"},[o("p",[t._v("系统检测到您的浏览器版本过低，无法完美使用本系统，建议您安装最新的谷歌浏览器进行使用。")])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ms-title"},[e("img",{attrs:{src:o("3DNY"),alt:""}})])}]};var l=o("C7Lr")(r,n,!1,function(t){o("/GDH")},"data-v-77bd3897",null);e.default=l.exports}});