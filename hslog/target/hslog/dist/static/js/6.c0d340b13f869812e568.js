webpackJsonp([6],{GPye:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("sJCN"),n=a("/sA3"),o={name:"funcGraph",data:function(){return{complete_url:"",nodeData:[],linkData:[]}},watch:{complete_url:function(){this.getUrlGraphData()}},methods:{getUrlGraphData:function(){var t=this;layer.load(1),this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/log/getVisitCountOfComUrlGroupByHttpSourceIP.do",t.$qs.stringify({complete_url:t.complete_url})).then(function(e){layer.closeAll();var a=[],l=[];a.push({name:e.data[0].complete_url.complete_url,count:e.data[0].complete_url.count}),e.data[0].source.forEach(function(t){var n={};n.name=t.source_ip,n.count=t.count,a.push(n);var o={};o.source=t.source_ip,o.target=e.data[0].complete_url.complete_url,o.count=t.count,l.push(o)}),t.nodeData=a,t.linkData=l}).catch(function(t){layer.closeAll(),layer.msg("获取数据失败",{icon:5})})})},nodeClick:function(t){var e={};e.val=t.target._private.data.id,e.clickType="node","http"===e.val.substring(0,4)?(e.type="url",e.kname="complete_url"):(e.type="ip",e.kname="multifield_ip"),Object(n.f)("flowLogs"+e.val,"logsManage/flowLogs.vue",e,"日志")},linkClick:function(t){var e={clickType:"link",type:"ip-url"};e.ipv4_src_addr=t.target._private.data.source,e.targetVal=t.target._private.data.target,e.kname="complete_url",Object(n.f)("flowLogs"+e.ipv4_src_addr+"-"+e.targetVal,"logsManage/flowLogs.vue",e,"日志")}},beforeRouteEnter:function(t,e,a){a(function(e){e.complete_url=t.query.complete_url,e.$options.name="funcGraph"+t.query.complete_url,Object(n.g)(t.name,"logsManage/funcGraph.vue","业务流")})},components:{vBasegraph:l.default}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-bg"},[a("div",{staticClass:"top-title"},[t._v(t._s(t.complete_url)+" 业务流")]),t._v(" "),a("div",{staticClass:"content"},[a("v-basegraph",{attrs:{nodeData:t.nodeData,linkData:t.linkData,nodeClick:t.nodeClick,linkClick:t.linkClick}})],1)])},staticRenderFns:[]};var c=a("C7Lr")(o,r,!1,function(t){a("HCd/")},"data-v-4bad7b0b",null);e.default=c.exports},"HCd/":function(t,e){}});