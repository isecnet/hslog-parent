webpackJsonp([5],{"0X9J":function(t,e){},"3vAp":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("P8yQ"),i={name:"graph",data:function(){return{ip:"",type:"",count:""}},mounted:function(){},methods:{getTopologicalData:function(){var t=this,e=n.init(document.getElementById("graph-content")),o={backgroundColor:"#3A4D5F",title:{text:"网络关系图",x:"center",textStyle:{color:""}},tooltip:{formatter:function(t){return"edge"===t.dataType?t.data.count:t.data.name+"<br/> 次数："+t.data.count}},series:[{type:"graph",top:"10%",roam:!0,focusNodeAdjacency:!0,force:{repulsion:500,edgeLength:[100,100]},layout:"force",symbol:"circle",edgeSymbol:["circle","arrow"],lineStyle:{normal:{opacity:.7}},label:{normal:{show:!0,position:"inside",textStyle:{fontSize:12}}},data:[],links:[{}],animationEasingUpdate:"quinticInOut",animationDurationUpdate:100}]};e.setOption(o);layer.load(1),this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/log/getTopologicalData.do",t.$qs.stringify({groupfiled:t.type,iporport:t.ip,count:t.count})).then(function(t){layer.closeAll();var n=t.data,i=n[0].data,a=i[0].count;for(var r in i)i[r].itemStyle={},i[r].draggable=!0,i[r].symbolSize=100*Math.pow(i[r].count/a,1/3),1===i[r].node?i[r].itemStyle.color="#de9325":2===i[r].node?i[r].itemStyle.color="#5f9da5":3===i[r].node&&(i[r].itemStyle.color="#bda29a");var l=n[0].links,c=[];for(var r in l)1===l[r].node&&c.push(l[r].count);var s=Math.max.apply(null,c);for(var r in l){l[r].lineStyle={};var p=10*Math.pow(l[r].count/s,1/3);l[r].symbolSize=[p,2*p],l[r].lineStyle.width=p,1===l[r].node?l[r].lineStyle.color="#EBC38C":2===l[r].node&&(l[r].lineStyle.color="#aed1d5")}o.series[0].data=i,o.series[0].links=l,e.setOption(o),window.addEventListener("resize",function(){e.resize()})}).catch(function(t){layer.closeAll(),layer.msg("获取信息失败",{icon:5})})})}},beforeRouteEnter:function(t,e,o){o(function(e){e.$options.name="graph"+t.query.iporport,""!==e.ip&&e.ip===t.query.iporport||(e.ip=t.query.iporport,e.type=t.query.type,e.count=t.query.count,e.getTopologicalData())})}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-bg"},[e("div",{staticClass:"top-title"},[this._v(this._s(this.ip)+" 关系图")]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"graph-wapper"},[e("div",{attrs:{id:"graph-content"}})])}]};var r=o("C7Lr")(i,a,!1,function(t){o("0X9J")},"data-v-7cb637d4",null);e.default=r.exports}});